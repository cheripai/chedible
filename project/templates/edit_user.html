{#    Copyright 2015 Dat Do
    
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
    
        http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
#}


{% extends "_base.html" %}

{% block content %}

    <div class="container">


        <div class="col-md-9">
            <div class="text-center" style="margin-top: 0px">
                <div class="panel panel-default">
                    <br>
                    <img src="{{ (user.image) }}" class="img-circle" alt="{{ (user.name) }}" width = "200" height="200">

                    <h1>
                        {{ user.name }} 
                        
                        {% if user.username != None %}
                        <small>{{ user.username }} </small>
                        {% endif %}

                    </h1>

                    <div>
                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> Joined on {{ month_day_year }}
                    </div>

                    <div>
                        <span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span> Score: {{ user.score }}
                    </div>
                    <br>
                </div>
            </div>

        <div class="page-header">

            <h2>
                Edit
            </h2>

        </div>

        {% if form.errors %}
            <ul class="errors">
                {% for field_name, field_errors in form.errors|dictsort if field_errors %}
                    {% for error in field_errors %}
                        <li class="text-danger">{{ form[field_name].label }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        {% endif %}

        <form class="form-horizontal" method="post" action="{{ url_for('edit_user', id=user.id) }}">
        
        {{ form.csrf_token }}

            <div class="form-row">
                <div class="form-group required">
                    <label class="control-label">{{ form.username.label }}:</label>
                    {{ form.username(class="form-control", type="text") }}
                </div>
            </div>

            <div class="form-row">
                    <div class="form-group">
                        <label class="control-label">{{ form.about.label }}:</label>
                        {{ form.about(class="form-control", type="text", rows=6) }}
                    </div>
            </div>

            <br>

            <h3 style="text-align:center">Preferences:</h3>

            <br>

            {% for entry in form %}
            {% if entry.id not in ['csrf_token', 'name', 'about', 'username'] %}
            <div class="col-sm-6">
                <div class="form-group">
                    <div class="form-row form-inline">
                    <label for="fun" class="col-sm-4 control-label">{{ form[entry.id].label }}:&nbsp</label>
                        <div class="input-group">
                            <div id="radioBtn" class="btn-group">
                                {% if form[entry.id].data == 'True' %}
                                    <a class="btn btn-primary btn-sm notActive" data-toggle="{{ entry.id }}" data-title="None">Not Sure</a>
                                    <a class="btn btn-primary btn-sm active" data-toggle="{{ entry.id }}" data-title="True">Yes</a>
                                    <a class="btn btn-primary btn-sm notActive" data-toggle="{{ entry.id }}" data-title="False">No</a>
                                {% elif form[entry.id].data == 'False' %}
                                    <a class="btn btn-primary btn-sm notActive" data-toggle="{{ entry.id }}" data-title="None">Not Sure</a>
                                    <a class="btn btn-primary btn-sm notActive" data-toggle="{{ entry.id }}" data-title="True">Yes</a>
                                    <a class="btn btn-primary btn-sm active" data-toggle="{{ entry.id }}" data-title="False">No</a>
                                {% else %}
                                    <a class="btn btn-primary btn-sm active" data-toggle="{{ entry.id }}" data-title="None">Not Sure</a>
                                    <a class="btn btn-primary btn-sm notActive" data-toggle="{{ entry.id }}" data-title="True">Yes</a>
                                    <a class="btn btn-primary btn-sm notActive" data-toggle="{{ entry.id }}" data-title="False">No</a>
                                {% endif %}
                                {% if form[entry.id].data == None %}
                                    {{ form[entry.id](type="hidden", value="None", id=entry.id) }}
                                {% else %}
                                    {{ form[entry.id](type="hidden", id=entry.id) }}
                                {% endif %}

                            </div>
                        </div>
                    </div>
                </div>
                <br>
            </div>
            {% endif %}
        {% endfor %}

            <div class="form-row">
                <div class="form-group">
                    
                    <hr class="featurette-divider"></hr>

                        <button class="form-control btn btn-primary submit-button" type="submit">Submit</button>
                </div>
            </div>
        </form>
    </div>
    
         <div class="col-md-3">
        </div>

        
        <div class="col-md-3">
            <div class="list-group">
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">Ads n shit</h4>
                    <p class="list-group-item-text">
Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel. 
Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel. 
Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel. 
Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel. 
                    </p>
                </a>
            </div>
        </div>

{% endblock %}
